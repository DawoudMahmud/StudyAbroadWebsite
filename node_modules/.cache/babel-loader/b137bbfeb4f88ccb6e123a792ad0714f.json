{"remainingRequest":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/babel-loader/lib/index.js!/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/Login.vue","mtime":1637820032000},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/babel.config.js","mtime":1635966138000},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/cache-loader/dist/cjs.js","mtime":1639160403303},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/babel-loader/lib/index.js","mtime":1639160404310},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/cache-loader/dist/cjs.js","mtime":1639160403303},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/vue-loader-v16/dist/index.js","mtime":1639160404253}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uL21haW4uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW1haWwgKyAiICIgKyB0aGlzLnBhc3N3b3JkKTsKICAgICAgdmFyIFVSTCA9ICJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmQ/a2V5PUFJemFTeUJlNWUtZDYxZGJZUmNqYkNjYjV6QVEtMjU1bGc1UHJ5QSI7CiAgICAgIGZldGNoKFVSTCwgewogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgICAgIH0pCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB3ZSBnZXQgdGhpbmdzIGZyb20gRmlyZWJhc2UgLi4uICh1c2VybmFtZSwgdG9rZW4sIGV4cCwgLi4uKQogICAgICAgIC8vIGlmIHRoZSBhdXRoZW4gZmFpbGVkLCB3ZSB3aWxsIGdldCBwcm9wZXJ0eSAiZXJyb3IiIAoKICAgICAgICBpZiAoZGF0YS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRVJST1IiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZXJyb3IpOwogICAgICAgICAgYWxlcnQoZGF0YS5lcnJvci5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gaWYgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZCwgd2Ugd2lsbCByZWNvcmQgdGhpcyBpbmZvCiAgICAgICAgICAvLyBpbnRvIHRoZSBnbG9iYWwgcHJvcGVydGllcy4gSGVuY2UsIHdlIGNhbiBhY2Nlc3MgdGhpcyAuLi4oaWRUb2tlbikKICAgICAgICAgIC8vIC4uLndlIG5lZWQgdG8gYXBwZW5kIGlkVG9rZW4gdG8gdGhlIFVSTCB0byBpbmZvcm0gRmlyZWJhc2UgdGhhdAogICAgICAgICAgLy8gInRoaXMgaXMgbWUiIC4uLiAibGV0IG1lIGFjY2VzcyB3aGF0ZXZlciByZXF1aXJlcyBhdXRoIgogICAgICAgICAgLy8gUmVjYWxsOiBpbiB0aGUgIlJ1bGVzIiB3ZSBtYXkgaGF2ZSB0aGlzCiAgICAgICAgICAvLyAgICAgICIud3JpdGUiIDogImF1dGggIT0gbnVsbCIKICAgICAgICAgIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kZGlzcGxheU5hbWUgPSBkYXRhLmRpc3BsYXlOYW1lOwogICAgICAgICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRpZFRva2VuID0gZGF0YS5pZFRva2VuOwogICAgICAgICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRleHBpcmVzSW4gPSBkYXRhLmV4cGlyZXNJbjsKICAgICAgICAgIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kYXV0aGVudGljYXRlZCA9IHRydWU7IC8vIHNlbmQgdGhlIHVzZXIgYmFjayB0byAvc3VydmV5CgogICAgICAgICAgX3RoaXMuJHJvdXRlci5yZXBsYWNlKCIvc3VydmV5Iik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/Login.vue"],"names":[],"mappings":";;;;AAkBA,SAAS,GAAT,QAAoB,YAApB;AAEA,eAAe;AACX,EAAA,IADW,kBACJ;AACH,WAAO;AACH,MAAA,KAAK,EAAE,EADJ;AAEH,MAAA,QAAQ,EAAE;AAFP,KAAP;AAIH,GANU;AAOX,EAAA,OAAO,EAAE;AACL,IAAA,UADK,wBACQ;AAAA;;AACT,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,KAAL,GAAa,GAAb,GAAmB,KAAK,QAApC;AACA,UAAM,GAAE,GAAI,mHAAZ;AACA,MAAA,KAAK,CAAC,GAAD,EAAM;AACP,QAAA,MAAM,EAAE,MADD;AAEP,QAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe;AACjB,UAAA,KAAK,EAAE,KAAK,KADK;AAEjB,UAAA,QAAQ,EAAE,KAAK,QAFE;AAGjB,UAAA,iBAAiB,EAAE;AAHF,SAAf;AAFC,OAAN,CAAL,CAQK,IARL,CAQU,UAAC,QAAD;AAAA,eAAc,QAAQ,CAAC,IAAT,EAAd;AAAA,OARV,EASK,IATL,CASU,UAAC,IAAD,EAAU;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,EADgB,CAEhB;AACA;;AACA,YAAI,IAAI,CAAC,KAAL,IAAc,IAAlB,EAAwB;AACpB,UAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,KAAjB;AACA,UAAA,KAAK,CAAC,IAAI,CAAC,KAAL,CAAW,OAAZ,CAAL;AACJ,SAJA,MAKK;AACD;AACA;AACA;AACA;AACA;AACA;AACA,UAAA,GAAG,CAAC,MAAJ,CAAW,gBAAX,CAA4B,YAA5B,GAA2C,IAAI,CAAC,WAAhD;AACA,UAAA,GAAG,CAAC,MAAJ,CAAW,gBAAX,CAA4B,QAA5B,GAAuC,IAAI,CAAC,OAA5C;AACA,UAAA,GAAG,CAAC,MAAJ,CAAW,gBAAX,CAA4B,UAA5B,GAAyC,IAAI,CAAC,SAA9C;AACA,UAAA,GAAG,CAAC,MAAJ,CAAW,gBAAX,CAA4B,cAA5B,GAA6C,IAA7C,CAVC,CAYD;;AACA,UAAA,KAAI,CAAC,OAAL,CAAa,OAAb,CAAqB,SAArB;AACJ;AACC,OAjCL,EAkCK,KAlCL,CAkCW,UAAC,KAAD;AAAA,eAAW,OAAO,CAAC,GAAR,CAAY,KAAZ,CAAX;AAAA,OAlCX;AAmCH;AAvCI;AAPE,CAAf","sourcesContent":["<template>\r\n    <div>\r\n         <h3>Login</h3>\r\n        <form @submit.prevent=\"submitForm\">\r\n            <p>\r\n                <label for=\"email\">email:</label>\r\n                <input id=\"email\" v-model=\"email\" />\r\n            </p>\r\n            <p>\r\n                <label for=\"password\">password:</label>\r\n                <input id=\"password\" v-model=\"password\" />\r\n            </p>\r\n            <button>Login</button>          \r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { app } from \"../main.js\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            email: \"\",\r\n            password: \"\",\r\n        };\r\n    },\r\n    methods: {\r\n        submitForm() {\r\n            console.log(this.email + \" \" + this.password);\r\n            const URL = \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBe5e-d61dbYRcjbCcb5zAQ-255lg5PryA\";\r\n            fetch(URL, {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    email: this.email,\r\n                    password: this.password,\r\n                    returnSecureToken: true,\r\n                }),\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data) => {\r\n                console.log(data);\r\n                // we get things from Firebase ... (username, token, exp, ...)\r\n                // if the authen failed, we will get property \"error\" \r\n                if (data.error != null) {\r\n                    console.log(\"ERROR\");\r\n                    console.log(data.error);\r\n                    alert(data.error.message);\r\n                }\r\n                else {\r\n                    // if the user is authenticated, we will record this info\r\n                    // into the global properties. Hence, we can access this ...(idToken)\r\n                    // ...we need to append idToken to the URL to inform Firebase that\r\n                    // \"this is me\" ... \"let me access whatever requires auth\"\r\n                    // Recall: in the \"Rules\" we may have this\r\n                    //      \".write\" : \"auth != null\"\r\n                    app.config.globalProperties.$displayName = data.displayName;\r\n                    app.config.globalProperties.$idToken = data.idToken;\r\n                    app.config.globalProperties.$expiresIn = data.expiresIn;\r\n                    app.config.globalProperties.$authenticated = true;\r\n\r\n                    // send the user back to /survey\r\n                    this.$router.replace(\"/survey\");\r\n                }\r\n                })\r\n                .catch((error) => console.log(error));\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n    background: rgb(81, 240, 131);\r\n    padding: 10px;\r\n    margin: 5px;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}