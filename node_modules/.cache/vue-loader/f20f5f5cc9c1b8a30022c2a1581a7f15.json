{"remainingRequest":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/SurveyResult.vue?vue&type=style&index=0&id=0091a0c7&scoped=true&lang=css","dependencies":[{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/SurveyResult.vue","mtime":1637218454000},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/css-loader/dist/cjs.js","mtime":1639160403917},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1639160404863},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/postcss-loader/src/index.js","mtime":1639160404263},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/cache-loader/dist/cjs.js","mtime":1639160403303},{"path":"/Users/pimol/Downloads/01-vue-http-basicx 2/node_modules/vue-loader-v16/dist/index.js","mtime":1639160404253}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZXN1bHQtcGFuZSB7CiAgYmFja2dyb3VuZDogbGlnaHRza3libHVlOwogIGJvcmRlci1yYWRpdXM6IDVweDsKICB3aWR0aDogODAlOwogIGhlaWdodDogMzV2aDsKICBtYXJnaW46IDVweDsKICBwYWRkaW5nOiAzcHg7Cn0K"},{"version":3,"sources":["/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/SurveyResult.vue"],"names":[],"mappings":";AA0IA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACd","file":"/Users/pimol/Downloads/01-vue-http-basicx 2/src/components/SurveyResult.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"result-pane\">\n    <h2>The survey results of {{ courseId }}</h2>\n    <button @click=\"getResult\">Load results</button>\n    <button @click=\"showResult\">Show results</button>\n    <p>\n    <ul>\n      <li>No plan: {{ T0 }}</li>\n      <li>T1: {{ T1 }}</li>\n      <li>T2: {{ T2 }}</li>\n      <li>T3: {{ T3 }}</li>\n      <li>Summer: {{ T4 }}</li>\n    </ul>\n    </p>\n    <router-link :to=\"'/detail/'+courseId\">more detail...</router-link>\n  </div>\n</template>\n\n<script>\n// import axios from \"axios\"\nimport AxiosService from \"../services/AxiosService.js\";\n\nexport default {\n  mounted() {\n    this.getResult(); // make a request to the server..\n  },\n  props: [\"courseId\"],\n  data() {\n    return {\n      results: [], // we want an array of objects\n      T0: 0,\n      T1: 0,\n      T2: 0,\n      T3: 0,\n      T4: 0,\n    };\n  },\n  methods: {\n    getResult() {\n      //alert(\"running getResult\");\n      // fetch(\n      //   \"your url\"\n      // )\n      //   .then(function (response) {\n      //     if (response.ok) {\n      //       return response.json();\n      //     }\n      //   })\n      //   .then((data) => {\n      //     //console.log(data);\n      //     const dataArray = [];\n      //     for (const id in data) {\n      //       const dummyObj = {};\n      //       dummyObj.id = id;\n      //       dummyObj.courseId = data[id].courseId;\n      //       dummyObj.courseTerm = data[id].courseTerm;\n      //       dummyObj.studentId = data[id].studentId;\n      //       dataArray.push(dummyObj);\n      //     }\n      //     this.results = dataArray;\n      //     this.showResult();\n      //   });\n      // move on with the lines RIGHT AWAY...\n      // ...\n      // ...\n      // ... these lines are executed.. we don't want fetch to finish at all.\n      \n      // axios.get(\n      //   \"https://vue-test-e7a21-default-rtdb.asia-southeast1.firebasedatabase.app/preregis.json\"\n      //   )\n      //   .then((response) => {\n      //     const data = response.data;\n      //     const dataObjArray = [];\n      //     // loop thorugh elements in data\n      //     for( const id in data ){\n      //       // we will make the object\n      //       const anObj = {}; // an empty obj\n      //       // populate anObj with data\n      //       anObj.id = id; // id is MoAsdasafsafsaf from Firebase\n      //       anObj.courseId = data[id].courseId;\n      //       anObj.courseTerm = data[id].courseTerm;\n      //       anObj.studentId = data[id].studentId;\n      //       // append the object (just created) to dataObjArray\n      //       dataObjArray.push(anObj);\n      //     }\n      //     // After we are done with the for loop\n      //     this.results = dataObjArray;\n      //     this.showResult();\n      //   })\n      //   .catch(error => (\n      //     console.log(\"Error: \" + error)\n      //   ));\n      // don't put any code here if it requires data that come from the get method\n    \n      // alert(\"Getting the results from the FRB\");\n      AxiosService.getPreRegis()\n      .then((response)  => {\n        const data = response.data;\n        const dataObjArray = [];\n        for (const id in data) {\n          const anObj = {};\n          anObj.id = id; \n          anObj.courseId = data[id].courseId;\n          anObj.courseTerm = data[id].courseTerm;\n          anObj.studentId = data[id].studentId;\n          if (anObj.courseId === this.courseId) {\n            dataObjArray.push(anObj);\n          }  \n        }\n        this.results = dataObjArray;\n        this.showResult();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    },\n    showResult() {\n      //   alert(\"showing  results\");\n      //   console.log(\"from showResult\");\n      //   console.log(this.results);\n      const arrT0 = this.results.filter((rec) => rec.courseTerm === \"0\");\n      const arrT1 = this.results.filter((rec) => rec.courseTerm === \"1\");\n      const arrT2 = this.results.filter((rec) => rec.courseTerm === \"2\");\n      const arrT3 = this.results.filter((rec) => rec.courseTerm === \"3\");\n      const arrT4 = this.results.filter((rec) => rec.courseTerm === \"4\");\n\n      this.T0 = arrT0.length;\n      this.T1 = arrT1.length;\n      this.T2 = arrT2.length;\n      this.T3 = arrT3.length;\n      this.T4 = arrT4.length;\n    },\n  },\n};\n</script>\n\n\n<style scoped>\n.result-pane {\n  background: lightskyblue;\n  border-radius: 5px;\n  width: 80%;\n  height: 35vh;\n  margin: 5px;\n  padding: 3px;\n}\n</style>"]}]}